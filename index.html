<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Myanmar Checkers Mobile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      height:100vh;
      margin:0;
      background:#1a1a1a;
      font-family:Arial, sans-serif;
      color:white;
    }
    #controls {
      display:flex;
      justify-content:center;
      align-items:center;
      gap:10px;
      margin-bottom:12px;
    }
    select, button {
      padding:10px 16px;
      font-size:16px;
      border-radius:12px;
      border:none;
      outline:none;
      box-shadow:0 3px 6px rgba(0,0,0,0.4);
    }
    button {
      background:#3af;
      color:white;
      cursor:pointer;
      transition:0.2s;
    }
    button:active {
      transform:scale(0.95);
      background:#28c;
    }
    select {
      background:#444;
      color:white;
    }
    #board {
      display:grid;
      grid-template-columns:repeat(8,1fr);
      grid-template-rows:repeat(8,1fr);
      width:95vmin;
      height:95vmin;
      border:8px solid #654321;
      border-radius:12px;
      box-shadow:0 0 15px rgba(0,0,0,0.7);
      background:#442;
    }
    .cell {
      display:flex;
      justify-content:center;
      align-items:center;
    }
    .dark { background:#5a3d2e; }
    .light { background:#e0c097; }
    .piece {
      width:80%;
      height:80%;
      border-radius:50%;
      display:flex;
      justify-content:center;
      align-items:center;
      font-size:5vmin;
      font-weight:bold;
      cursor:pointer;
      box-shadow:0 3px 6px rgba(0,0,0,0.5);
      transition:0.2s;
    }
    .piece:active { transform:scale(0.9); }
    .blue { background:linear-gradient(#4ad, #138); color:white; }
    .red { background:linear-gradient(#f66, #900); color:white; }
    .king { border:3px solid gold; box-shadow:0 0 12px gold; }
    .highlight { outline:4px solid yellow; }
  </style>
</head>
<body>
  <div id="controls">
    <select id="level">
      <option value="easy">Easy</option>
      <option value="medium">Medium</option>
      <option value="hard">Hard</option>
    </select>
    <button onclick="init()">Restart</button>
  </div>
  <div id="board"></div>

<script>
const size=8;
let board=[], turn="blue", selected=null, moves=[], difficulty="easy";

document.getElementById("level").addEventListener("change", e=>{
  difficulty = e.target.value;
});

function init(){
  board=[];
  for(let r=0;r<size;r++){
    board[r]=[];
    for(let c=0;c<size;c++){
      if((r+c)%2===1 && r<3) board[r][c]={color:"red",king:false};
      else if((r+c)%2===1 && r>4) board[r][c]={color:"blue",king:false};
      else board[r][c]=null;
    }
  }
  turn="blue";
  selected=null;
  moves=[];
  render();
}

function render(){
  const b=document.getElementById("board"); b.innerHTML="";
  for(let r=0;r<size;r++){
    for(let c=0;c<size;c++){
      const cell=document.createElement("div");
      cell.className="cell "+((r+c)%2?"dark":"light");
      cell.onclick=()=>handleClick(r,c);
      if(board[r][c]){
        const p=board[r][c];
        const piece=document.createElement("div");
        piece.className="piece "+p.color+(p.king?" king":"");
        piece.textContent=p.king?"K":"";
        if(selected && selected.r===r && selected.c===c) piece.classList.add("highlight");
        cell.appendChild(piece);
      }
      if(moves.some(m=>m.r===r && m.c===c)){
        cell.style.outline="3px solid lime";
      }
      b.appendChild(cell);
    }
  }
}

function handleClick(r,c){
  if(turn!=="blue") return;
  const p=board[r][c];
  if(p && p.color===turn){
    selected={r,c};
    moves=legalMoves(r,c);
    render();
  } else if(selected){
    const move=moves.find(m=>m.r===r && m.c===c);
    if(move) makeMove(selected.r,selected.c,move);
  }
}

function inside(r,c){ return r>=0 && r<size && c>=0 && c<size; }

function legalMoves(r,c){
  const p=board[r][c]; if(!p) return [];
  let moves=[];
  if(p.king){
    for(const [dr,dc] of [[1,1],[1,-1],[-1,1],[-1,-1]]){
      let nr=r+dr, nc=c+dc;
      while(inside(nr,nc) && !board[nr][nc]){
        moves.push({r:nr,c:nc,captures:[],isCapture:false});
        nr+=dr; nc+=dc;
      }
      if(inside(nr,nc) && board[nr][nc]?.color!==p.color){
        let lr=nr+dr, lc=nc+dc;
        if(inside(lr,lc) && !board[lr][lc]){
          moves.push({r:lr,c:lc,captures:[{r:nr,c:nc}],isCapture:true});
        }
      }
    }
  } else {
    const forwardDirs = p.color==="blue" ? [[-1,-1],[-1,1]] : [[1,-1],[1,1]];
    for(const [dr,dc] of forwardDirs){
      const nr=r+dr, nc=c+dc;
      if(inside(nr,nc) && !board[nr][nc]){
        moves.push({r:nr,c:nc,captures:[],isCapture:false});
      }
    }
    for(const [dr,dc] of forwardDirs){
      const mr=r+dr, mc=c+dc, lr=r+2*dr, lc=c+2*dc;
      if(
        inside(lr,lc) &&
        board[mr]?.[mc] &&
        board[mr][mc].color!==p.color &&
        !board[lr][lc]
      ){
        moves.push({r:lr,c:lc,captures:[{r:mr,c:mc}],isCapture:true});
      }
    }
  }
  return moves;
}

function makeMove(r,c,move){
  const p=board[r][c]; 
  board[r][c]=null; 
  board[move.r][move.c]=p;

  if(move.captures && move.captures.length>0){
    move.captures.forEach(cap=>board[cap.r][cap.c]=null);
  }

  if(!p.king && (move.r===0 || move.r===size-1)) p.king=true;

  if(move.captures && move.captures.length>0){
    const cont = legalMoves(move.r, move.c).filter(m => m.captures && m.captures.length>0);
    if(cont.length > 0){
      selected={r:move.r,c:move.c};
      moves=cont;
      render();
      return;
    }
  }

  selected=null;
  moves=[];
  turn = (turn==="blue") ? "red" : "blue";
  render();

  if(turn==="red") setTimeout(aiMove,600);
}

function aiMove(){
  let aiMoves=[];
  for(let r=0;r<size;r++){
    for(let c=0;c<size;c++){
      const p=board[r][c];
      if(p && p.color==="red"){
        for(const m of legalMoves(r,c)) aiMoves.push({r,c,move:m});
      }
    }
  }
  if(aiMoves.length===0) return;
  let choice;
  if(difficulty==="easy"){
    choice=aiMoves[Math.floor(Math.random()*aiMoves.length)];
  } else if(difficulty==="medium"){
    const captures=aiMoves.filter(m=>m.move.captures.length>0);
    if(captures.length>0) choice=captures[Math.floor(Math.random()*captures.length)];
    else choice=aiMoves[Math.floor(Math.random()*aiMoves.length)];
  } else {
    choice=aiMoves[Math.floor(Math.random()*aiMoves.length)]; // placeholder for minimax
  }
  makeMove(choice.r,choice.c,choice.move);
}

init();
</script>
</body>
</html>
