<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Checkers - Human vs Computer</title>
<style>
  body{
    display:flex;flex-direction:column;
    justify-content:center;align-items:center;
    min-height:100vh;margin:0;
    background:linear-gradient(135deg,#2c2c2c,#1a1a1a);
    font-family:"Segoe UI",sans-serif;color:#fff;
  }
  .board{
    display:grid;
    grid-template-columns:repeat(8,1fr);
    grid-template-rows:repeat(8,1fr);
    width:90vmin;height:90vmin;
    max-width:600px;max-height:600px;
    border:8px solid #5a381e;border-radius:12px;
    box-shadow:0 0 20px rgba(0,0,0,.6);
    overflow:hidden;
  }
  .cell{display:flex;align-items:center;justify-content:center}
  .dark{background:#3a2415}
  .light{background:#d2b48c}
  .piece{
    width:70%;height:70%;
    border-radius:50%;
    display:flex;align-items:center;justify-content:center;
    font-size:2.2vmin;font-weight:bold;
    box-shadow:inset 0 4px 8px rgba(0,0,0,.5),0 2px 5px rgba(0,0,0,.6);
    transition:transform .2s;
  }
  .blue{
    background:radial-gradient(circle at 30% 30%,#5ab0ff,#1f7be5);
    border:2px solid #0d4a94;
  }
  .yellow{
    background:radial-gradient(circle at 30% 30%,#ffe97a,#f5d34b);
    border:2px solid #c9a500;
  }
  .piece:hover{transform:scale(1.1)}
  .king::after{content:"â™”";color:#000;font-size:2.5vmin}
  .selected{outline:4px solid #00ff99;outline-offset:-4px}
  .highlight{box-shadow:0 0 15px 5px #ffd966aa inset,0 0 8px #ffd966}
  #status{
    margin:15px;
    padding:10px 20px;
    background:#222;border-radius:8px;
    font-weight:bold;font-size:18px;
    box-shadow:0 2px 6px rgba(0,0,0,.5);
    text-align:center;
  }
  #controls{margin:10px}
  button{
    padding:10px 18px;
    border:none;
    background:linear-gradient(135deg,#1f7be5,#155aab);
    color:white;
    font-weight:bold;
    border-radius:8px;
    cursor:pointer;
    transition:all .2s;
  }
  button:hover{background:linear-gradient(135deg,#2b8cff,#1c66c7);transform:scale(1.05)}
  #score{
    margin:10px;padding:8px 16px;
    background:#333;border-radius:20px;
    font-size:16px;font-weight:bold;
    box-shadow:inset 0 2px 4px rgba(0,0,0,.6);
  }
</style>
</head>
<body>
<div id="controls">
  <button onclick="restartGame()">ðŸ”„ Restart</button>
</div>
<div id="board" class="board"></div>
<div id="status">Loadingâ€¦</div>
<div id="score">You: 0 | Computer: 0</div>

<script>
const SIZE=8;
let board=[],turn="blue",selected=null,highlights=[],mustContinue=false;
let humanScore=0, aiScore=0;
const boardEl=document.getElementById("board"),
      statusEl=document.getElementById("status"),
      scoreEl=document.getElementById("score");

function init(){
  board=Array.from({length:SIZE},()=>Array(SIZE).fill(null));
  for(let r=0;r<3;r++)for(let c=0;c<SIZE;c++)if((r+c)%2)board[r][c]={color:"blue",king:false}; // AI top
  for(let r=SIZE-3;r<SIZE;r++)for(let c=0;c<SIZE;c++)if((r+c)%2)board[r][c]={color:"yellow",king:false}; // Human bottom
  turn="blue";selected=null;highlights=[];mustContinue=false;
  render();
  setTimeout(aiMove,400);
}

function render(){
  boardEl.innerHTML="";
  for(let r=0;r<SIZE;r++)for(let c=0;c<SIZE;c++){
    const cell=document.createElement("div");
    cell.className="cell "+(((r+c)%2)?"dark":"light");
    if(selected&&selected.r==r&&selected.c==c)cell.classList.add("selected");
    if(highlights.some(h=>h.r==r&&h.c==c))cell.classList.add("highlight");
    const p=board[r][c];
    if(p){
      const piece=document.createElement("div");
      piece.className="piece "+p.color+(p.king?" king":"");
      if(p.color==="yellow" && turn==="yellow")piece.onclick=e=>{e.stopPropagation();onPiece(r,c)};
      cell.appendChild(piece);
    }else if(turn==="yellow") cell.onclick=()=>onCell(r,c);
    boardEl.appendChild(cell);
  }
  statusEl.textContent=turn==="yellow"?"âœ¨ Your turn (Yellow)":"ðŸ’» Computer thinkingâ€¦";
}

function onPiece(r,c){
  const p=board[r][c];if(!p||p.color!==turn)return;
  if(mustContinue&&(!selected||selected.r!==r||selected.c!==c))return;
  selected={r,c};highlights=legalMoves(r,c);
  if(anyCapture(turn))highlights=highlights.filter(h=>h.isCapture);
  render();
}
function onCell(r,c){
  if(!selected)return;
  const t=highlights.find(h=>h.r==r&&h.c==c);
  if(t)doMove(selected.r,selected.c,t);
}
function inside(r,c){return r>=0&&r<SIZE&&c>=0&&c<SIZE;}
function legalMoves(r,c){
  const p=board[r][c];if(!p)return[];
  const dirs=[[1,-1],[1,1],[-1,-1],[-1,1]];
  const fdirs=p.king?dirs:(p.color==="yellow"?[[-1,-1],[-1,1]]:[[1,-1],[1,1]]);
  const moves=[];
  for(const[dr,dc]of fdirs){const nr=r+dr,nc=c+dc;if(inside(nr,nc)&&!board[nr][nc])moves.push({r:nr,c:nc,captures:[],isCapture:false});}
  for(const[dr,dc]of dirs){const mr=r+dr,mc=c+dc,lr=r+2*dr,lc=c+2*dc;
    if(inside(lr,lc)&&board[mr]?.[mc]&&board[mr][mc].color!==p.color&&!board[lr][lc])
      moves.push({r:lr,c:lc,captures:[{r:mr,c:mc}],isCapture:true});}
  return moves;
}
function anyCapture(player){for(let r=0;r<SIZE;r++)for(let c=0;c<SIZE;c++){const p=board[r][c];
  if(p&&p.color===player&&legalMoves(r,c).some(m=>m.isCapture))return true;}return false;}
function furtherCaps(r,c){return legalMoves(r,c).filter(m=>m.isCapture);}
function doMove(fr,fc,move){
  const p=board[fr][fc];board[move.r][move.c]={...p};board[fr][fc]=null;
  if(move.captures)for(const cap of move.captures)board[cap.r][cap.c]=null;
  const np=board[move.r][move.c];
  if(!np.king){if(np.color==="yellow"&&move.r===0)np.king=true;if(np.color==="blue"&&move.r===SIZE-1)np.king=true;}
  if(move.isCapture){const more=furtherCaps(move.r,move.c);if(more.length){selected={r:move.r,c:move.c};highlights=more;mustContinue=true;render();return;}}
  mustContinue=false;selected=null;highlights=[];turn=(turn==="blue"?"yellow":"blue");
  render();
  if(turn==="blue")setTimeout(aiMove,400);
}

function playerMoves(player){
  let ms=[];for(let r=0;r<SIZE;r++)for(let c=0;c<SIZE;c++){const p=board[r][c];
    if(p&&p.color===player){const m=legalMoves(r,c);if(m.length)ms.push({r,c,m});}}
  return ms;
}
function aiMove(){
  const movesets=playerMoves("blue");
  if(!movesets.length){humanScore++;updateScore();statusEl.textContent="ðŸŽ‰ You win!";return;}

  // Capture moves
  let captureMoves=[];
  for(const s of movesets){
    for(const m of s.m){
      if(m.isCapture) captureMoves.push({fr:s.r,fc:s.c,m});
    }
  }

  let choice;
  if(captureMoves.length){
    let maxKill=Math.max(...captureMoves.map(m=>m.m.captures.length));
    let bestMoves=captureMoves.filter(m=>m.m.captures.length===maxKill);
    choice=bestMoves[Math.floor(Math.random()*bestMoves.length)];
  } else {
    const all=movesets.flatMap(s=>s.m.map(m=>({fr:s.r,fc:s.c,m})));
    choice=all[Math.floor(Math.random()*all.length)];
  }

  doMove(choice.fr,choice.fc,choice.m);
  if(!playerMoves("yellow").length){aiScore++;updateScore();statusEl.textContent="ðŸ’» Computer wins!";}
}

function updateScore(){
  scoreEl.textContent=`You: ${humanScore} | Computer: ${aiScore}`;
}
function restartGame(){init();}
init();
</script>
</body>
</html>
